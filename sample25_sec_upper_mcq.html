<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOAI Singapore 2025 MCQ - Secondary Upper Sample</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; background-color: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .question { margin-bottom: 30px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; background-color: #fafafa; }
        .question h2 { color: #2c3e50; margin-top: 0; }
        .question-header { display: flex; justify-content: space-between; align-items: center; }
        .question-header .toggle-btn { margin-left: auto; }
        .options { margin: 15px 0; }
        .option { margin: 8px 0; padding: 10px; background-color: white; border-radius: 5px; border-left: 3px solid #3498db; }
        .option.correct { background-color: #e8f5e8; border-left-color: #27ae60; font-weight: 600; }
        .toggle-btn { background: linear-gradient(45deg, #27ae60, #1e8449); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.95em; margin: 10px 0; }
        .toggle-btn.hide { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .explanation { background-color: #fff3cd; border-left: 3px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .loading { text-align: center; padding: 50px; color: #666; }
        .error { color: #e74c3c; background-color: #fdf2f2; padding: 15px; border-radius: 5px; border-left: 3px solid #e74c3c; }
        .quiz-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #3498db; }
        .quiz-title { color: #2c3e50; font-size: 2.2em; margin: 0; }
        .quiz-subtitle { color: #7f8c8d; font-size: 1.1em; margin: 8px 0 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="quiz-header">
            <h1 class="quiz-title"></h1>
            <p class="quiz-subtitle"></p>
        </div>
        <div id="content"><div class="loading"><p>Loading questions...</p></div></div>
    </div>

    <script>
        class QuizParser {
            constructor() { this.container = document.getElementById('content'); this.questions = []; this.titleEl=document.querySelector('.quiz-title'); this.subtitleEl=document.querySelector('.quiz-subtitle'); }
            extractHeader(md){
                const lines = md.split('\n');
                let title = '', subtitle = '';
                if (lines.length > 0) {
                    const l0 = lines[0].trim();
                    if (l0.startsWith('# ')) title = l0.replace(/^#\s*/, '');
                }
                if (lines.length > 1) {
                    const l1 = lines[1].trim();
                    if (l1.startsWith('## ')) subtitle = l1.replace(/^##\s*/, '');
                }
                if (!subtitle) {
                    for (let i = 0; i < Math.min(lines.length, 30); i++) {
                        const l = lines[i].trim();
                        if (l.startsWith('## Question')) break;
                        if (l.startsWith('## ')) { subtitle = l.replace(/^##\s*/, ''); break; }
                    }
                }
                return { title, subtitle };
            }
            async loadMarkdownFile(filename) { const r = await fetch(filename); if (!r.ok) throw new Error(`Failed to load ${filename}: ${r.status} ${r.statusText}`); return await r.text(); }
            parseQuestions(md) {
                const qs = []; const lines = md.split('\n'); let cur=null, inOpts=false, sec=null;
                for (let line of lines) {
                    line=line.trim(); if (line===''||line==='---') continue;
                    if (line.startsWith('## Question')) { if (cur) qs.push(cur); cur={number: line.replace('## Question ','').trim(), question:'', options:[], answer:'', explanation:''}; sec='q'; inOpts=false; }
                    else if (line.startsWith('**Answer:')) { if (cur){ cur.answer=line.replace('**Answer: ','').replace('**',''); sec='ex'; inOpts=false; } }
                    else if (line.startsWith('**') && line.endsWith('**')) { if (cur&&sec==='q'&&!cur.question){ cur.question=line.replace(/\*\*/g,''); inOpts=true; } }
                    else if (inOpts && (/^[A-D]\)/.test(line))) { if (cur) cur.options.push(line); }
                    else if (sec==='ex' && !line.startsWith('**')) { if (cur) cur.explanation += (cur.explanation? ' ' : '') + line; }
                }
                if (cur) qs.push(cur); return qs;
            }
            renderQuestions(qs) {
                let html=''; for (let i=0;i<qs.length;i++){ const q=qs[i]; const opts=q.options.map(o=>{const m=o.match(/^([A-D])\)\s*/); const L=m?m[1]:''; return `<div class="option" data-letter="${L}">${o}</div>`;}).join('');
                    html += `<div class="question" id="q-${i}"><div class="question-header"><h2>Question ${q.number}</h2><button class="toggle-btn" data-qidx="${i}" data-answer-letter="${q.answer}">Show Answer</button></div><p><strong>${q.question}</strong></p><div class="options">${opts}</div>${q.explanation? `<div id="ex-${i}" class="explanation" style="display:none;">${q.explanation}</div>`:''}</div>`; }
                return html;
            }
            attachAnswerToggle() {
                const btns=this.container.querySelectorAll('.toggle-btn'); btns.forEach(btn=>{ btn.addEventListener('click',()=>{ const idx=btn.getAttribute('data-qidx'); const ans=(btn.getAttribute('data-answer-letter')||'').trim().slice(0,1).toUpperCase(); const ex=document.getElementById(`ex-${idx}`); const c=document.getElementById(`q-${idx}`); const opts=c?c.querySelectorAll('.option'):[]; let tgt; opts.forEach(o=>{ const L=(o.getAttribute('data-letter')||o.textContent.trim().charAt(0)).toUpperCase(); if(L===ans) tgt=o; }); const on=tgt&&tgt.classList.contains('correct'); if(tgt){ if(on){ tgt.classList.remove('correct'); } else { opts.forEach(o=>o.classList.remove('correct')); tgt.classList.add('correct'); } } if(ex) ex.style.display=on?'none':'block'; btn.textContent=on?'Show Answer':'Hide Answer'; if(on){ btn.classList.remove('hide'); } else { btn.classList.add('hide'); } }); });
            }
            async loadAndDisplay(filename){ this.container.innerHTML='<div class="loading"><p>Loading questions...</p></div>'; const md=await this.loadMarkdownFile(filename); const meta=this.extractHeader(md); if(this.titleEl) this.titleEl.textContent = meta.title || ''; if(this.subtitleEl){ if(meta.subtitle){ this.subtitleEl.textContent = meta.subtitle; this.subtitleEl.style.display='block'; } else { this.subtitleEl.textContent=''; this.subtitleEl.style.display='none'; } } const qs=this.parseQuestions(md); if(qs.length===0) throw new Error('No questions found'); const html=this.renderQuestions(qs); this.container.innerHTML=html; this.attachAnswerToggle(); }
        }
        document.addEventListener('DOMContentLoaded',()=>{ const qp=new QuizParser(); qp.loadAndDisplay('sample25_sec_upper_mcq.md').catch(async e=>{ console.error('Primary load failed, trying fallback', e); await qp.loadAndDisplay('noaisg25mcq.md'); }); });
    </script>
</body>
</html>
